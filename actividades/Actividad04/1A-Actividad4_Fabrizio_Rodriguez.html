<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Complejos</title>

<style>
:root {
  --gold: #c9a86a;
  --gold-bright: #e7d3a1;
  --surface: #111;
  --text: #eee;
  --transition: 0.25s;
}

body {
  margin: 0;
  padding: 20px;
  background: #0d0d0d;
  color: var(--text);
  font-family: Arial, sans-serif;
}

.container {
  max-width: 600px;
  margin: auto;
}

input {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid #555;
  background: #1c1c1c;
  color: var(--text);
  font-size: 16px;
}

.block {
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 25px;
  box-shadow: 0 0px 20px rgba(0,0,0,0.25);
}

h2 {
  margin-top: 0;
  font-size: 20px;
  color: var(--gold);
}

.result-box {
  padding: 12px;
  background: rgba(255,255,255,0.07);
  border-radius: 10px;
  margin-top: 10px;
  font-size: 18px;
}
</style>
</head>
<body>

<div class="container">

  <div class="block">
    <h2>Forma Cartesiana</h2>
    <input id="real" type="text" placeholder="Parte real (a)">
    <input id="imag" type="text" placeholder="Parte imaginaria (b)">
  </div>

  <div class="block">
    <h2>Forma Polar</h2>
    <input id="modulus" type="text" placeholder="Módulo (r)">
    <input id="angle" type="text" placeholder="Ángulo (θ en grados)">
  </div>

  <div class="block">
    <h2>Forma Exponencial</h2>
    <input id="exp-modulus" type="text" placeholder="Módulo (r)">
    <input id="exp-angle" type="text" placeholder="Ángulo (θ en grados)">
  </div>

  <button onclick="clearAll()" style="
      width: 100%;
      padding: 14px;
      background: var(--gold);
      border: none;
      margin-top: 10px;
      border-radius: 10px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
  ">Limpiar todo</button>

  <div class="block">
    <h2>Resultados</h2>
    <div id="cartesian-result" class="result-box">Ingresa los valores arriba</div>
    <div id="polar-result" class="result-box">Ingresa los valores arriba</div>
    <div id="exponential-result" class="result-box">Ingresa los valores arriba</div>
  </div>

</div>

<script>
let isUpdating = false;

function formatNumber(x) {
  if (isNaN(x)) return x;
  return Number(x.toFixed(6)).toString();
}

function toRadians(deg) {
  return deg * Math.PI / 180;
}

function toDegrees(rad) {
  return rad * 180 / Math.PI;
}

function updateFromCartesian() {
  if (isUpdating) return;

  const real = parseFloat(document.getElementById("real").value);
  const imag = parseFloat(document.getElementById("imag").value);

  if (isNaN(real) || isNaN(imag)) return;

  const modulus = Math.sqrt(real * real + imag * imag);
  const angle = toDegrees(Math.atan2(imag, real));
  const angleText = formatNumber(angle);

  isUpdating = true;

  document.getElementById("modulus").value = formatNumber(modulus);
  document.getElementById("angle").value = angleText;
  document.getElementById("exp-modulus").value = formatNumber(modulus);
  document.getElementById("exp-angle").value = angleText;

  isUpdating = false;

  updateResults(real, imag, modulus, angle);
}

function updateFromPolar() {
  if (isUpdating) return;

  const modulus = parseFloat(document.getElementById("modulus").value);
  const angle = parseFloat(document.getElementById("angle").value);

  if (isNaN(modulus) || isNaN(angle)) return;

  const real = modulus * Math.cos(toRadians(angle));
  const imag = modulus * Math.sin(toRadians(angle));

  isUpdating = true;

  document.getElementById("real").value = formatNumber(real);
  document.getElementById("imag").value = formatNumber(imag);
  document.getElementById("exp-modulus").value = formatNumber(modulus);
  document.getElementById("exp-angle").value = formatNumber(angle);

  isUpdating = false;

  updateResults(real, imag, modulus, angle);
}

function updateFromExponential() {
  if (isUpdating) return;

  const modulus = parseFloat(document.getElementById("exp-modulus").value);
  const angle = parseFloat(document.getElementById("exp-angle").value);

  if (isNaN(modulus) || isNaN(angle)) return;

  const real = modulus * Math.cos(toRadians(angle));
  const imag = modulus * Math.sin(toRadians(angle));

  isUpdating = true;

  document.getElementById("real").value = formatNumber(real);
  document.getElementById("imag").value = formatNumber(imag);
  document.getElementById("modulus").value = formatNumber(modulus);
  document.getElementById("angle").value = formatNumber(angle);

  isUpdating = false;

  updateResults(real, imag, modulus, angle);
}

function updateResults(real, imag, modulus, angle) {
  const angleText = formatNumber(angle);

  let cartesianText = "";
  if (imag >= 0) {
    cartesianText = `${formatNumber(real)} + ${formatNumber(imag)}i`;
  } else {
    cartesianText = `${formatNumber(real)} - ${formatNumber(Math.abs(imag))}i`;
  }
  document.getElementById("cartesian-result").textContent = cartesianText;

  const polarText = `${formatNumber(modulus)} (cos ${angleText} + i sin ${angleText})`;
  document.getElementById("polar-result").textContent = polarText;

  const exponentialText = `${formatNumber(modulus)} e^(i ${angleText})`;
  document.getElementById("exponential-result").textContent = exponentialText;
}

function clearAll() {
  isUpdating = true;

  document.getElementById("real").value = "";
  document.getElementById("imag").value = "";
  document.getElementById("modulus").value = "";
  document.getElementById("angle").value = "";
  document.getElementById("exp-modulus").value = "";
  document.getElementById("exp-angle").value = "";

  document.getElementById("cartesian-result").textContent = "Ingresa los valores arriba";
  document.getElementById("polar-result").textContent = "Ingresa los valores arriba";
  document.getElementById("exponential-result").textContent = "Ingresa los valores arriba";

  isUpdating = false;
}

document.getElementById("real").addEventListener("input", updateFromCartesian);
document.getElementById("imag").addEventListener("input", updateFromCartesian);
document.getElementById("modulus").addEventListener("input", updateFromPolar);
document.getElementById("angle").addEventListener("input", updateFromPolar);
document.getElementById("exp-modulus").addEventListener("input", updateFromExponential);
document.getElementById("exp-angle").addEventListener("input", updateFromExponential);
</script>

<!-- BOTÓN FLOTANTE -->
<div style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
  <a href="/index.html" 
     style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px; 
            background: linear-gradient(180deg, var(--gold-bright), var(--gold)); 
            color: #0b0b0b; border-radius: 10px; text-decoration: none; font-weight: 600;
            box-shadow: 0 8px 20px rgba(201,168,106,0.12); transition: all var(--transition);">
    <span>←</span> Volver
  </a>
</div>

</body>
</html>
